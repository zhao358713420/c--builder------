//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------

void __fastcall TForm1::OpenMenuClick(TObject *Sender)
{
	if (OpenPictureDialog->Execute()) {
		Image->Picture->LoadFromFile(OpenPictureDialog->FileName);
		DrawLevelsLine(0,256,0,256);
	}
}
//---------------------------------------------------------------------------

void __fastcall TForm1::DrawLevelsLine(int InputMin,int InputMax,int OutputMin,int OutputMax)
{
	LevelsImage->Canvas->Pen->Color = clBlack;
	LevelsImage->Canvas->Rectangle(0,0,256,256);
	OutputMin = 255-OutputMin;
    OutputMax = 255-OutputMax;
	LevelsImage->Canvas->Pen->Color = clRed;
	LevelsImage->Canvas->MoveTo(0,OutputMin);
	LevelsImage->Canvas->LineTo(InputMin,OutputMin);
	LevelsImage->Canvas->MoveTo(InputMin,OutputMin);
	LevelsImage->Canvas->LineTo(InputMax,OutputMax);
	LevelsImage->Canvas->MoveTo(InputMax,OutputMax);
	LevelsImage->Canvas->LineTo(256,OutputMax);
}
//---------------------------------------------------------------------------

void __fastcall TForm1::OkButtonClick(TObject *Sender)
{
	InputMin = (int)InputMinEdit->Text;
	InputMax = (int)InputMaxEdit->Text;
	OutputMin = (int)OutputMinEdit->Text;
	OutputMax = (int)OutputMaxEdit->Text;
    ShowMessage(InputMin);
}
//---------------------------------------------------------------------------

